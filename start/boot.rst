开机启动
^^^^^^^^^^^^

.. contents:: 本文目录


启动过程
----------

系统配置
~~~~~~~~~~~~~
在启动过程中，Sipeed M1先初始化芯片配置，比如系统时钟，REPL串口，flash，spiffs文件系统。

导入系统脚本
~~~~~~~~~~~~~~
再次之后将会执行镜像内置启动脚本boot.py，该脚本首先会导入本平台的相关包，比如machine，app，platform等，同时也导入MicroPython的内置模块如gc，os。

初始化外设
~~~~~~~~~~~~~~~
根据Sipeed M1平台的电路设计初始化外设引脚，如摄像头ov2640，lcd显示屏st7789以及RGB灯。

导入用户脚本
~~~~~~~~~~~~~~
将检测文件系统中是否存在用户自定初始化脚本 **init.py** 。如果有则导入该脚本，没有则不导入脚本。该脚本存放在固件的文件系统中

检测模式
~~~~~~~~~~~
该步骤在导入init.py后执行。脚本会检测 **引脚18** ，如果该引脚为低电平(可用跳线帽将18脚短接到旁边的地脚)，将进入测试模式，如果为高电平（默认状态）则跳过测试模式。测试模式会启动摄像头和屏幕并直接将摄像头图像输出的屏幕，同时pin8-pin35( **除去pin11** )会根据pin11的电平而变化。进入测试模式后将无法进入MaixPy，请按rst进行重启。如果没有init.py脚本将跳过该步骤

开机启动
~~~~~~~~~~~~
如果没有进入测试模式，将直接进入MaixPy，屏幕会显示 **Welcome to MaixPy**

.. figure:: https://fdvad021asfd8q.oss-cn-hangzhou.aliyuncs.com/Sipeed_M1/image/tutorial/boot_lcd.jpg
  :width: 500px
  :align: center

如何进入终端
----------------
上面为MaixPy的启动流程。启动过之后，我们可以在终端软件中选中相应的串口，配置串口波特率为 **115200** ，停止位为 **1** ，数据位宽为 **8** 。使用终端软件连接开发板，按下回车键将会有提示符 **">>>"** 出现，恭喜你已经进入MaixPy。

.. note:: 如果你不知道什么是终端软件，则可以搜索下载 **Xshell** 或者 **securecrt** 。如果你是单片机开发者，那么 **Xcom** 你应该有听说过。以上都是笔者比较常用的终端软件，各位小白和用户可以尝试下载使用


